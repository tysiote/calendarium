"use strict";

function parseResponse(res) {
    res.forEach(function (e) {
        e.start_time = parseDate(e.start_time, "decode", e);
        e.id = parseInt(e.id);
    });
    return res;
}

function parseDate(input, type, e) {
    if (type === "encode") {
        var month = input.month.toString();
        var day = input.day.toString();
        var hour = input.hour.toString();
        var minute = input.minute.toString();
        var result = input.year + "-";
        if (month.length === 1) result += "0";
        result += month + "-";
        if (day.length === 1) result += "0";
        result += day + " ";
        if (hour.length === 1) result += "0";
        result += hour + "-";
        if (minute.length === 1) result += "0";
        result += minute;
        return result;
    }
    if (type === "decode") {
        var _result = {};
        var date = input.split(" ")[0];
        var time = input.split(" ")[1];
        _result.year = parseInt(date.split("-")[0]);
        _result.month = parseInt(date.split("-")[1]);
        _result.day = parseInt(date.split("-")[2]);
        _result.hour = parseInt(time.split(":")[0]);
        _result.minute = parseInt(time.split(":")[1]);

        _result.sortingvalue = _result.hour.toString() + "";
        if (_result.sortingvalue.length === 1) _result.sortingvalue = "0" + _result.sortingvalue;
        if (_result.minute < 10) _result.sortingvalue += "0" + _result.minute.toString();else _result.sortingvalue += _result.minute.toString();
        if (e.no_time == "1") _result.sortingvalue = "-1";

        _result.sortingvaluedate = _result.year.toString() + "";
        if (_result.month < 10) _result.sortingvaluedate += "0" + _result.month.toString();else _result.sortingvaluedate += _result.month.toString();
        if (_result.day < 10) _result.sortingvaluedate += "0" + _result.day.toString();else _result.sortingvaluedate += _result.day.toString();
        _result.sortingvaluedate += _result.sortingvalue;
        return _result;
    }
    return null;
}

function parsePostData(obj) {
    var result = "";
    for (var key in obj) {
        result += key + "=" + obj[key].toString() + "&";
    }return result.substring(0, result.length - 1);
}

function parseMonth(input) {
    var months = ["január", "február", "marec", "apríl", "máj", "jún", "júl", "august", "september", "október", "november", "december"];
    var months2 = ["jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec"];
    if (typeof input === "string") {
        if (months.indexOf(input.toLowerCase()) !== -1) return months.indexOf(input.toLowerCase()) + 1;
        if (months2.indexOf(input.toLowerCase()) !== -1) return months2.indexOf(input.toLowerCase()) + 1;
    }
    if (typeof input === "number" && input >= 0 && input < 12) return months[input].substr(0, 1).toUpperCase() + months[input].substr(1, months[input].length).toLowerCase();
    return false;
}

function parseWeekDay(input) {
    var days = ["mon", "tue", "wed", "thu", "fri", "sat", "sun"];
    if (days.indexOf(input.toLowerCase()) !== -1) return days.indexOf(input.toLowerCase());
    return false;
}

function translateWeekDay(input, shifted) {
    var days = ["pondelok", "utorok", "streda", "štvrtok", "piatok", "sobota", "nedeľa"];
    if (shifted) days = ["nedeľa", "pondelok", "utorok", "streda", "štvrtok", "piatok", "sobota"];
    if (input !== false) return days[input];
    return false;
}

function parseMonthSlovak(index) {
    var months = ["januára", "februára", "marca", "apríla", "mája", "júna", "júla", "augusta", "septembra", "októbra", "novembra", "decembra"];
    return months[index];
}

function parseTextToSearch(input) {
    var dict = {
        "á": "a",
        "ä": "a",
        "č": "c",
        "ď": "d",
        "é": "e",
        "ě": "e",
        "í": "i",
        "ľ": "l",
        "ĺ": "l",
        "ň": "n",
        "ó": "o",
        "ô": "o",
        "ö": "o",
        "ř": "r",
        "ŕ": "r",
        "š": "s",
        "ť": "t",
        "ú": "u",
        "ü": "u",
        "ý": "y",
        "ž": "z"
    };
    var result = input.toLowerCase();
    for (var key in dict) {
        result = customReplace(result, key, dict[key]);
    }return result;
}